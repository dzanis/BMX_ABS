# BMX_ABS
https://github.com/dzanis/BMX_ABS

![Alt text](https://github.com/dzanis/BMX_ABS/blob/master/screenshot.png)

BMX_ABS это проект для контроллера антиблокировочного тормозного модуля для велосипеда 
(или друго транспорта)

## Подключение к пинам

|                  | GPIO | Board pin | Remarks                                                         |
|------------------|------|-----------|-----------------------------------------------------------------|
| Датчик Холла     |   5  | D1        | A3144EU [datasheet](https://www.mpja.com/download/a3144eul.pdf) |
| Пин соленоида #1 |  12  | D6        | +3.3в  или  на массу *                                          |
| Пин соленоида #2 |  14  | D5        | +3.3в  или  на массу *                                          |
| Насос            |   4  | D2        | +3.3в                                                           |

```
Датчик Холла  считывание импульсов 0 - 3,3в
* +3.3в  или  на массу - смена полярности для соленоида клапана
закрыть клапан - (GPIO-12 +3,3в а GPIO-14 на массу)
открыть клапан - (GPIO-12 на массу а GPIO-14 +3,3в)
отключить клапан (GPIO-12 и GPIO-14 0в)
насос включить    GPIO-4 +3.3в , отключить 0в
```
## Описание логики

#### Если ABS активно*:
#### 1. Если происходит блокировка колеса**:
> - закрыть клапан
> - включить насос
#### 2. Если колесо разблокировалось:
>- открыть клапан
>
>   Через 1000мс:
> - отключить клапан 
> - отключить насос

#### 3 Если колесо не разблокировалось более чем за 2000мс
> - деактивировать ABS
> - отключить клапан 
> - отключить насос

```
* ABS активно - если от холла поступает 25имп/сек (10км/ч) и выше
  если импульсы ниже 25имп/сек и происходит блокировка колеса, то АБС не включается (управление пинами не происходит)
** блокировка колеса - если нету импульсов от датчика холла
```

## Версии

Последнюю версию прошивки смотреть здесь [releases](https://github.com/dzanis/BMX_ABS/releases)

## Сборка

Проект только для контроллеров на чипе ESP8266

Для сборки потребуется Platform IO 

## Authors
Автор идеи и механики
* **Макс Сиволап** [vk](https://vk.com/id49387476)

Программист кода

* **Zanis Dukalskis** - *git repository* - [dzanis](https://github.com/dzanis)

## License

С лицензией пока что  не определился.
